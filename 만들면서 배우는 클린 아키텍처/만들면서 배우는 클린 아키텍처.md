## 📕 오늘 공부한 내용, 이렇게 정리해 봅시다. ✒

**TIL(Today I learn) 기록일** : 2022.07.12

**오늘 읽은 범위** : 

### 3줄 요약 📑

+ 요약1
+ 요약2
+ 요약3

---

### 1장 계층형 아키텍처의 문제는 무엇일까?

#### 계층형 아키텍처는 데이터베이스 주도 설계를 유도한다.

- 소프트웨어는 상태가 아니라 행동을 중심으로 모델링해야 한다. 
- 그러나 그동안 만들어 본 애플리케이션의 유스케이스를 한번 떠올려보자. 데이터베이스의 구조를 먼저 생각하고, 이를 토대로 도메인 로직을 구현했을 것이다.
- 비즈니스 관점에서는 전혀 맞지 않는 방법이다. 다른 무엇보다도 도메인 로직을 먼저 만들어야 한다.

#### 지름길을 택하기 쉬워진다.

- 전통적인 계층형 아키텍처에서 전체적으로 적용되는 유일한 규칙은, 특정한 계층에서는 같은 계층에 있는 컴포넌트나 아래에 있는 계층에만 접근 가능하다는 것이다.
- 그러나 개발이 진행될 수록, 지금길(꼼수)에 의해 영속성 계층이 비대해 질 것이다.
- 그러니 아키텍처의 '지름길 모드'를 끄고 싶다면, 적어도 추가적인 아키텍처 규칙을 강제하지 않는 한 계층은 최선의 선택은 아니다.

#### 테스트하기 어려워진다.

- 계층형 아키텍처를 사용할 떄 일반적으로 나타나는 변화의 형태는 계층을 건너뛰는 것이다. 이러한 일이 자주 일어난다면 두 가지 문제점이 생긴다.
	- 단 하나의 필드를 조작하는 것에 불과하더라도 도메인 로직을 웹 계층에 구현하게 된다는 것이다.
	- 웹 계층 테스트에서 도메인 계층뿐만 아니라 영속성 계층도 모킹해야 한다는 것이다.
- 시간이 흘러 웹 컴포넌트의 규모가 커지면 다양한 영속성 컴포넌트에 의존성이 많이 쌓이면서 테스트의 복잡도를 높인다.


#### 유스케이스를 숨긴다.

- 계층형 아키텍처에서는 도메인 서비스의 '너비'에 관한 규칙을 강제하지 않는다. 넓은 서비시는 영속성 계층에 많은 의존성을 갖게 되고, 다시 웹 레이어의 많은 컴포넌트가 이 서비스에 의존.  

#### 동시 작업이 어려워진다.

- 인원을 더 투입하여 더 빨리 프로젝트를 마치고 싶다면? 아키텍처가 이를 지원해야 함. 그러나 계층형 아키텍처는 이런 측면에서는 그다지 도움이 되지 않는다.

#### 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까?

- 올바르게 구축하고 몇 가지 추가적인 규칙들을 적용하면 계층형 아키텍처는 유지보수하기 매우 쉬워지며 코드를 쉽게 변경하거나 추가할 수 있게 된다.
- 그러나 앞에서 살펴봤듯이 계층형 아키텍처는 많은 것들이 잘못된 방향으로 흘러가도록 용인한다.
- 계층형 아키텍처로 만들든 다른 아키텍처 스타일로 만들든, 계층형 아키텍처의 함정을 염두에 두면 지름길을 택하지 않고 유지보수하기에 더 쉬운 솔루션을 만드는 데 도움이 될 것이다.

-------------------------------------------------------

### 2장 의존성 역전하기

#### 단일 책임 원칙

```
단일 책임 원칙: 컴포넌트를 변경하는 이유는 오직 하나 뿐이어야 한다.
```
- 안타깝게도 변경할 이유라는 것은 컴포넌트 간의 의존성을 통해 너무도 쉽게 전파된다.

#### 부수효과에 관한 이야기

```
부수효과: 
```


#### 의존성 역전 원칙

- 계층형 아키텍처에서 영속성 계층에 대한 도메인 계층의 의존성 때문에 영속성 계층을 변경할 때마다 잠재적으로 도메인 계층도 변경해야 한다. 그러나 도메인 코드는 애플리케이션에서 가장 중요한 코드다. 영속성 코드가 바뀐다고 해서 도메인 코드까지 바꾸고 싶지는 않다.
- 의존성 역전 원칙을 적용하여, 영속성 계층이 도메인 계층에 의존하도록 의존성을 역전시킨다.

```
의존성 역전 원칙: 코드상의 어떤 의존성이든 그 방향을 바꿀 수(역전시킬 수) 있다.
```

#### 클린 아키텍처

- 이 아키텍처에서 가장 주요한 규칙은 의존성 규칙으로, 계층 간의 모든 의존성이 안쪽으로 향해야 한다는 것이다.
- 도메인 코드에서는 어떤 영속성 프레임워크나 UI 프레임워크가 사용되는지 알 수 없기 때문에 특정 프레임워크에 특화된 코드를 가질 수 없고 비즈니스 규칙에 집중할 수 있다. 그래서 도메인 코드를 자유렙게 모델링할 수 있다.
- 도메인 계층이 영속성이나 UI 같은 외부 계층과 철저하게 분리돼야 하므로 애플리케이션의 엔티티에 대한 모델을 각 계층에서 유지보수해야 한다.

#### 육각형 아키텍처

- 육각형 모양은 사실 아무 의미도 없다. 다른 시스템이나 어댑터와 연결되는 4개 이상의 면을 가질 수 있음을 보여주기 위해 일반적인 사각형 대신 육각형을 사용했다고 한다.
- 육각형 안에는 도메인 엔티티와 이와 상호작용하는 유스케이스가 있다. 육각형에서 외부로 향하는 의존성이 없기 때문에 마틴이 클린 아키텍처에서 제시한 의존성 규칙이 그대로 적용한다는 점을 주목하자. **대신 모든 의존성은 코어를 향한다.**
- 육각형의 왼쪽에 있는 어댑터들은 애클리케이션을 주도하는 어댑터들이다. 반면에 오른쪽에 씨는 어댑터들은 애플리케이션에 의해 주도되는 어댑터들이다.

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?

- 의존성을 역전시켜 도메인 코드가 다른 바깥쪽 코드에 의존하지 않게 함으로써 영속성과 UI에 특화된 모든 문제로부터 도메인 로직의 결합을 제거하고 코드를 변경할 이유의 수를 줄일 수 있다.


### 3장 코드 구성하기

#### 계층으로 구성하기

- 적어도 세 가지 이유로 이 패키지 구조는 최적의 구조가 아니다.
	- 애플리케이션의 기능 조각이나 특성을 구분 짓는 패키지 경계가 없다.
	- 애플리케이션이 어떤 유스케이스들을 제공하는지 파악할 수 없다.
	- 패키지 구조를 통해서는 우리가 목표로 하는 아키텍처를 파악할 수 없다.

#### 기능으로 구성하기

- 기능에 의한 패키징 방식은 사실 계층에 의한 패키징 방식보다 아키텍처의 가시성을 훨씬 더 떨어뜨린다.

#### 아키텍처적으로 표현력있는 패키지 구조

- 육각형 아키텍처에서 구조적으로 핵심적인 요소는 엔티티, 유스케이스, 인커밍/아웃고잉 포트, 인커밍/아웃고잉 어댑터다.
- 이처럼 표현력 있는 패키지 구조는 아키텍처에 대한 적극적인 사고를 촉진한다. 많은 패키지가 생기고, 현재 작업 중인 코드를 어떤 패키지에 넣어야 할지 계속 생각해야 하기 때문이다.
- 어댑터 코드를 자체 패키지로 이동시키면 필요할 경우 하나의 어댑터를 다른 구현으로 쉽게 교체할 수 있다는 장점도 있다.
- 모든 구조와 마찬가지로 패키지 구조를 소프트웨어 프로젝트 내내 유지하기 위해서는 지켜야할 규칙이 있다.


#### 의존성 주입의 역할

- 클린 아키텍처의 가장 본질적인 요건은 애플리케이션 계층이 인커밍/아웃고잉 어댑터에 의존성을 갖지 않는 것이다.
- 인커밍 어댑터에 대해서는 그렇게 하기가 쉽다.
- 아웃고잉 어댑터에 대해서는 제어 흐름의 반대 방향으로 의존성을 돌리기 위해 **의존성 역전 원칙을 이용**해야 한다.
- 포트 인터페이스를 구현한 실제 객체를 누가 애플리케이션 계층에 제공해야 할까? 이 부분에서 **의존성 주입**을 활용할 수 있다.

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?

- 육각형 아키텍처의 패키지 구조를 통해 코드에서 아키텍처의 즉정 요소를 찾으려면 아키텍처 다이어그램의 박스 이름을 따라 패키지 구조를 탐색하면 된다.


-------------------------------------------------------


### 4장 유스케이스 구현하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 5장 웹 어댑터 구현하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 6장 영속성 어댑터 구현하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 7장 아키텍처 요소 테스트하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 8장 경계 간 매핑하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 9장 애플리케이션 조립하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 10장 아키텍처 경계 강제하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 11장 의식적으로 지름길 사용하기

#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------


### 12장 아키텍처 스타일 결정하기


#### 유지보수 가능한 소프트웨어를 만드는 데 어떻게 도움이 될까?
-------------------------------------------------------




### 책속 한구절 보관함 📖

| p    | text                                           |
| ---- | ---------------------------------------------- |
| 2  | 													|
| 3  | 													|

### 궁금한 내용이나, 더 알아보고 싶은 내용을 적어봅시다 🤔
```


